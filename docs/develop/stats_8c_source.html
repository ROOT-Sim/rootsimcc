<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>The ROme OpTimistic Simulator: src/log/stats.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="flatdoc.css" rel="stylesheet" type="text/css"/>
<link href="inline-params.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">The ROme OpTimistic Simulator
   &#160;<span id="projectnumber">3.0.0</span>
   </div>
   <div id="projectbrief">A General-Purpose Multithreaded Parallel/Distributed Simulation Platform</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('stats_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">stats.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="stats_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="stats_8h.html">log/stats.h</a>&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160; </div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="io_8h.html">arch/io.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="mem_8h.html">arch/mem.h</a>&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="timer_8h.html">arch/timer.h</a>&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="arg__parse_8h.html">core/arg_parse.h</a>&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="core_8h.html">core/core.h</a>&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;assert.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;memory.h&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;stdarg.h&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;stdatomic.h&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#define STATS_BUFFER_ENTRIES (1024)</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#define STD_DEV_POWER_2_EXP 5</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#define STATS_MAX_STRLEN 32U</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="structstats__measure.html">   34</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstats__measure.html">stats_measure</a> {</div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">   36</a></span>&#160;        uint64_t <a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="structstats__measure.html#a827f1b8d1b9eb514afe1b747698b67b9">   38</a></span>&#160;        uint64_t <a class="code" href="structstats__measure.html#a827f1b8d1b9eb514afe1b747698b67b9">sum_t</a>;</div>
<div class="line"><a name="l00040"></a><span class="lineno"><a class="line" href="structstats__measure.html#af231201acf8a6d822229dea7da4dcd27">   40</a></span>&#160;        uint64_t <a class="code" href="structstats__measure.html#af231201acf8a6d822229dea7da4dcd27">var_t</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;};</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; </div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="structstats__thread.html">   44</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstats__thread.html">stats_thread</a> {</div>
<div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="structstats__thread.html#aa4988bb5aa6b80b69fbaf24212e4601b">   46</a></span>&#160;        uint64_t <a class="code" href="structstats__thread.html#aa4988bb5aa6b80b69fbaf24212e4601b">rt</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="structstats__thread.html#ab3482596682dc55b1df711866b9867e2">   48</a></span>&#160;        <span class="keyword">struct </span><a class="code" href="structstats__measure.html">stats_measure</a> <a class="code" href="structstats__thread.html#ab3482596682dc55b1df711866b9867e2">s</a>[STATS_COUNT];</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;};</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; </div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="structstats__node.html">   51</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstats__node.html">stats_node</a> {</div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">   53</a></span>&#160;        <a class="code" href="core_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> <a class="code" href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">gvt</a>;</div>
<div class="line"><a name="l00055"></a><span class="lineno"><a class="line" href="structstats__node.html#af76abe0b371c73bb0ac288133734a32a">   55</a></span>&#160;        uint64_t <a class="code" href="structstats__node.html#af76abe0b371c73bb0ac288133734a32a">rss</a>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;};</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160; </div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="structstats__glob.html">   58</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structstats__glob.html">stats_glob</a> {</div>
<div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="structstats__glob.html#a750a2471dc8141051b50fe18b7db121a">   60</a></span>&#160;        uint64_t <a class="code" href="structstats__glob.html#a750a2471dc8141051b50fe18b7db121a">threads_count</a>;</div>
<div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="structstats__glob.html#a30292ab96ddc2463d07ea8af5f44b12b">   62</a></span>&#160;        uint64_t <a class="code" href="structstats__glob.html#a30292ab96ddc2463d07ea8af5f44b12b">max_rss</a>;</div>
<div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="structstats__glob.html#aca05a63245a0c65eb537d04142d54eb9">   64</a></span>&#160;        uint64_t <a class="code" href="structstats__glob.html#aca05a63245a0c65eb537d04142d54eb9">glob_init_rt</a>;</div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="structstats__glob.html#a42fde726f84b73b933cabf0bc213c42f">   66</a></span>&#160;        uint64_t <a class="code" href="structstats__glob.html#a42fde726f84b73b933cabf0bc213c42f">glob_fini_rt</a>;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="structstats__glob.html#a8a8633c3e5e4ecb254ea7c9019cdaafe">   68</a></span>&#160;        uint64_t <a class="code" href="structstats__glob.html#a8a8633c3e5e4ecb254ea7c9019cdaafe">timestamps</a>[STATS_GLOBAL_COUNT];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;};</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160; </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;static_assert(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstats__measure.html">stats_measure</a>) == 24 &amp;&amp;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstats__thread.html">stats_thread</a>) == 8 + 24 * STATS_COUNT &amp;&amp;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstats__node.html">stats_node</a>) == 16 &amp;&amp;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;              <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstats__glob.html">stats_glob</a>) == 32 + 8 * (STATS_GLOBAL_COUNT),</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;              <span class="stringliteral">&quot;structs aren&#39;t naturally packed, parsing may be difficult&quot;</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="stats_8c.html#a6ba56d5c3bc4d8cc7bb98cbeca24c559">   78</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="stats_8c.html#a6ba56d5c3bc4d8cc7bb98cbeca24c559">s_names</a>[] = {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        [STATS_ROLLBACK] = <span class="stringliteral">&quot;rollbacks&quot;</span>,</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        [STATS_GVT] = <span class="stringliteral">&quot;gvt&quot;</span>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        [STATS_MSG_SILENT] = <span class="stringliteral">&quot;silent messages&quot;</span>,</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        [STATS_MSG_PROCESSED] = <span class="stringliteral">&quot;processed messages&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;};</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">static</span> <a class="code" href="timer_8h.html#aaf3e6a4d4c95119af7e1a3e1c34a2833">timer_uint</a> sim_start_ts;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structstats__glob.html">stats_glob</a> stats_glob_cur;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160; </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keyword">static</span> FILE *stats_node_tmp;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="keyword">static</span> FILE **stats_tmps;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="keyword">static</span> __thread <span class="keyword">struct </span><a class="code" href="structstats__thread.html">stats_thread</a> stats_cur;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160; </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="keyword">static</span> __thread <a class="code" href="timer_8h.html#aaf3e6a4d4c95119af7e1a3e1c34a2833">timer_uint</a> last_ts[STATS_COUNT];</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160; </div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> file_write_chunk(FILE *f, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> data_size)</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="core_8h.html#a1c0c89beb84d05c5ba0bc7ce527a3925">unlikely</a>(fwrite(data, data_size, 1, f) != 1))</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <a class="code" href="log_8h.html#a9040717cd3977ade4c2a18eb5418c312">log_log</a>(<a class="code" href="log_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error during disk write!&quot;</span>);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160; </div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *file_memory_load(FILE *f, int64_t *f_size_p)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;{</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        fseek(f, 0, SEEK_END);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        <span class="keywordtype">long</span> f_size = ftell(f); <span class="comment">// Fails horribly for files bigger than 2 GB</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        fseek(f, 0, SEEK_SET);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="keywordtype">void</span> *ret = <a class="code" href="mm_8c.html#af66ae2c31965b29586901a21fab3e012">mm_alloc</a>(f_size);</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">if</span> (fread(ret, f_size, 1, f) != 1) {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(ret);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                *f_size_p = 0;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        *f_size_p = f_size;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;}</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160; </div>
<div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="stats_8c.html#a67e625728da937e5dced9ff57d5658ad">  121</a></span>&#160;<span class="keyword">static</span> FILE *<a class="code" href="stats_8c.html#a67e625728da937e5dced9ff57d5658ad">file_open</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *open_type, <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ...)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        va_list args, args_cp;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        va_start(args, fmt);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        va_copy(args_cp, args);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160; </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="keywordtype">size_t</span> l = vsnprintf(NULL, 0, fmt, args_cp) + 1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        va_end(args_cp);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="keywordtype">char</span> *f_name = <a class="code" href="mm_8c.html#af66ae2c31965b29586901a21fab3e012">mm_alloc</a>(l);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        vsnprintf(f_name, l, fmt, args);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        va_end(args);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        FILE *ret = fopen(f_name, open_type);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <span class="keywordflow">if</span> (ret == NULL)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                <a class="code" href="log_8h.html#a9040717cd3977ade4c2a18eb5418c312">log_log</a>(<a class="code" href="log_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to open \&quot;%s\&quot; in %s mode&quot;</span>, f_name,</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        open_type);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(f_name);</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;}</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="stats_8h.html#a3f10dd99af0532c7131b5d135160e9f8">  146</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="stats_8c.html#a3f10dd99af0532c7131b5d135160e9f8">stats_global_time_start</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;        sim_start_ts = <a class="code" href="timer_8c.html#a2df778f2559a4dd4d7a44fbe5551dbee">timer_new</a>();</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160; </div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="stats_8h.html#a90e9709ceb1778ab3f4ca70feb26bec8">  154</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="stats_8c.html#a90e9709ceb1778ab3f4ca70feb26bec8">stats_global_time_take</a>(<span class="keyword">enum</span> stats_global_time this_stat)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a8a8633c3e5e4ecb254ea7c9019cdaafe">timestamps</a>[this_stat] = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(sim_start_ts);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;}</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="stats_8h.html#a7239d7313f2bc17c3e8cbecbbd332675">  162</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="stats_8c.html#a7239d7313f2bc17c3e8cbecbbd332675">stats_global_init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;{</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#aca05a63245a0c65eb537d04142d54eb9">glob_init_rt</a> = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(sim_start_ts);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a750a2471dc8141051b50fe18b7db121a">threads_count</a> = <a class="code" href="core_8c.html#a36101d9260ca31d3930f69b9d2d1f64d">n_threads</a>;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> (mem_stat_setup() &lt; 0)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <a class="code" href="log_8h.html#a9040717cd3977ade4c2a18eb5418c312">log_log</a>(<a class="code" href="log_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to extract memory statistics!&quot;</span>);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        stats_node_tmp = <a class="code" href="io_8h.html#aabff20d55fe51d94772a40aced8b19ac">io_file_tmp_get</a>();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        setvbuf(stats_node_tmp, NULL, _IOFBF,</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                STATS_BUFFER_ENTRIES * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="structstats__node.html">stats_node</a>));</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        stats_tmps = <a class="code" href="mm_8c.html#af66ae2c31965b29586901a21fab3e012">mm_alloc</a>(<a class="code" href="core_8c.html#a36101d9260ca31d3930f69b9d2d1f64d">n_threads</a> * <span class="keyword">sizeof</span>(*stats_tmps));</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;}</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="stats_8h.html#aeaa149d6c0445b22e944a063e0884d0d">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="stats_8c.html#aeaa149d6c0445b22e944a063e0884d0d">stats_init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        stats_tmps[<a class="code" href="core_8c.html#a91a4943f7079610bd0bdaa6362bc0ead">rid</a>] = <a class="code" href="io_8h.html#aabff20d55fe51d94772a40aced8b19ac">io_file_tmp_get</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        setvbuf(stats_tmps[<a class="code" href="core_8c.html#a91a4943f7079610bd0bdaa6362bc0ead">rid</a>], NULL, _IOFBF,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                STATS_BUFFER_ENTRIES * <span class="keyword">sizeof</span>(stats_cur));</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160; </div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="preprocessor">#ifdef ROOTSIM_MPI</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160; </div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> stats_files_receive(FILE *o)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="core_8h.html#a6bbc54689d56c687d66a8e5b3374dfae">nid_t</a> j = 1; j &lt; n_nodes; ++j) {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                <span class="keywordtype">int</span> buf_size;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keyword">struct </span><a class="code" href="structstats__glob.html">stats_glob</a> *sg_p = <a class="code" href="mpi_8c.html#acb3c33fc5ce4a4b4596c282082d50647">mpi_blocking_data_rcv</a>(&amp;buf_size, j);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                file_write_chunk(o, sg_p, buf_size);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                uint64_t iters = sg_p-&gt;<a class="code" href="structstats__glob.html#a750a2471dc8141051b50fe18b7db121a">threads_count</a> + 1; <span class="comment">// +1 for node stats</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(sg_p);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">for</span> (uint64_t i = 0; i &lt; iters; ++i) {</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keywordtype">void</span> *buf = <a class="code" href="mpi_8c.html#acb3c33fc5ce4a4b4596c282082d50647">mpi_blocking_data_rcv</a>(&amp;buf_size, j);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        int64_t f_size = buf_size;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        file_write_chunk(o, &amp;f_size, <span class="keyword">sizeof</span>(f_size));</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        file_write_chunk(o, buf, buf_size);</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(buf);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                }</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> stats_files_send(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a30292ab96ddc2463d07ea8af5f44b12b">max_rss</a> = mem_stat_rss_max_get();</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a42fde726f84b73b933cabf0bc213c42f">glob_fini_rt</a> = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(sim_start_ts);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <a class="code" href="mpi_8c.html#ac8efb86deaac9d9d8a08bc0dd1689885">mpi_blocking_data_send</a>(&amp;stats_glob_cur, <span class="keyword">sizeof</span>(stats_glob_cur), 0);</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160; </div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        int64_t f_size;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;        <span class="keywordtype">void</span> *f_buf = file_memory_load(stats_node_tmp, &amp;f_size);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        f_size = min(INT_MAX, f_size);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <a class="code" href="mpi_8c.html#ac8efb86deaac9d9d8a08bc0dd1689885">mpi_blocking_data_send</a>(f_buf, f_size, 0);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(f_buf);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160; </div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="core_8h.html#abbbb4962846f86af8e54d514d1b348a9">rid_t</a> i = 0; i &lt; <a class="code" href="core_8c.html#a36101d9260ca31d3930f69b9d2d1f64d">n_threads</a>; ++i) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                f_buf = file_memory_load(stats_tmps[i], &amp;f_size);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                f_size = min(INT_MAX, f_size);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <a class="code" href="mpi_8c.html#ac8efb86deaac9d9d8a08bc0dd1689885">mpi_blocking_data_send</a>(f_buf, f_size, 0);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(f_buf);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        }</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160; </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160; </div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> stats_file_final_write(FILE *o)</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;{</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        uint16_t endian_check = 61455U; <span class="comment">// 0xFOOF</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        file_write_chunk(o, &amp;endian_check, <span class="keyword">sizeof</span>(endian_check));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        int64_t n = STATS_COUNT;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        file_write_chunk(o, &amp;n, <span class="keyword">sizeof</span>(n));</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; STATS_COUNT; ++i) {</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordtype">size_t</span> l = min(strlen(<a class="code" href="stats_8c.html#a6ba56d5c3bc4d8cc7bb98cbeca24c559">s_names</a>[i]), STATS_MAX_STRLEN);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                file_write_chunk(o, <a class="code" href="stats_8c.html#a6ba56d5c3bc4d8cc7bb98cbeca24c559">s_names</a>[i], l);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> nul = 0;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="keywordflow">for</span> (; l &lt; STATS_MAX_STRLEN; ++l)</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                        file_write_chunk(o, &amp;nul, 1);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        }</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        n = n_nodes;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        file_write_chunk(o, &amp;n, <span class="keyword">sizeof</span>(n));</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a30292ab96ddc2463d07ea8af5f44b12b">max_rss</a> = mem_stat_rss_max_get();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        stats_glob_cur.<a class="code" href="structstats__glob.html#a42fde726f84b73b933cabf0bc213c42f">glob_fini_rt</a> = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(sim_start_ts);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        file_write_chunk(o, &amp;stats_glob_cur, <span class="keyword">sizeof</span>(stats_glob_cur));</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        int64_t buf_size;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordtype">void</span> *buf = file_memory_load(stats_node_tmp, &amp;buf_size);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        file_write_chunk(o, &amp;buf_size, <span class="keyword">sizeof</span>(buf_size));</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        file_write_chunk(o, buf, buf_size);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(buf);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160; </div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="core_8h.html#abbbb4962846f86af8e54d514d1b348a9">rid_t</a> i = 0; i &lt; <a class="code" href="core_8c.html#a36101d9260ca31d3930f69b9d2d1f64d">n_threads</a>; ++i) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                buf = file_memory_load(stats_tmps[i], &amp;buf_size);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                file_write_chunk(o, &amp;buf_size, <span class="keyword">sizeof</span>(buf_size));</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                file_write_chunk(o, buf, buf_size);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                <a class="code" href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a>(buf);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;}</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="stats_8h.html#aaba9e91afadfd2ef11d623b51487527a">  273</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="stats_8c.html#aaba9e91afadfd2ef11d623b51487527a">stats_global_fini</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="preprocessor">#ifdef ROOTSIM_MPI</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        <a class="code" href="mpi_8c.html#acb1301d97e9200c5b2e9a4dc27bc72d3">mpi_node_barrier</a>();</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="core_8c.html#ae146790564e2175182e1cd7e32da3aa6">nid</a>) {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                stats_files_send();</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        FILE *o = <a class="code" href="stats_8c.html#a67e625728da937e5dced9ff57d5658ad">file_open</a>(<span class="stringliteral">&quot;w&quot;</span>, <span class="stringliteral">&quot;%s_stats.bin&quot;</span>, <a class="code" href="arg__parse_8c.html#a7195c1ec94920593811357698b8efe41">arg_parse_program_name</a>());</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="keywordflow">if</span> (o == NULL) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                <a class="code" href="log_8h.html#a9040717cd3977ade4c2a18eb5418c312">log_log</a>(<a class="code" href="log_8h.html#aea3f57d6dcc5b4ac957e2679e87dde27">LOG_WARN</a>, <span class="stringliteral">&quot;Unavailable stats file: stats will be dumped on stdout&quot;</span>);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                o = stdout;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        }</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160; </div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        stats_file_final_write(o);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="preprocessor">#ifdef ROOTSIM_MPI</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        stats_files_receive(o);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160; </div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        fflush(o);</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">if</span> (o != stdout)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                fclose(o);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordtype">void</span> stats_time_start(<span class="keyword">enum</span> stats_time this_stat)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        last_ts[this_stat] = <a class="code" href="timer_8c.html#a2df778f2559a4dd4d7a44fbe5551dbee">timer_new</a>();</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="keywordtype">void</span> stats_time_take(<span class="keyword">enum</span> stats_time this_stat)</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;{</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        <span class="keyword">struct </span><a class="code" href="structstats__measure.html">stats_measure</a> *s_mes = &amp;stats_cur.<a class="code" href="structstats__thread.html#ab3482596682dc55b1df711866b9867e2">s</a>[this_stat];</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keyword">const</span> uint64_t t = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(last_ts[this_stat]);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="core_8h.html#ac082df2dd9a1024f6e8d16a61855d989">likely</a>(s_mes-&gt;<a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a>)) {</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <span class="keyword">const</span> int64_t num = (t * s_mes-&gt;<a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a> - s_mes-&gt;<a class="code" href="structstats__measure.html#a827f1b8d1b9eb514afe1b747698b67b9">sum_t</a>);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                s_mes-&gt;<a class="code" href="structstats__measure.html#af231201acf8a6d822229dea7da4dcd27">var_t</a> += ((num * num) &lt;&lt; (2 * STD_DEV_POWER_2_EXP)) /</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                        (s_mes-&gt;<a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a> * (s_mes-&gt;<a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a> + 1));</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160; </div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        s_mes-&gt;<a class="code" href="structstats__measure.html#a827f1b8d1b9eb514afe1b747698b67b9">sum_t</a> += t;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        s_mes-&gt;<a class="code" href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">count</a>++;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160; </div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="keywordtype">void</span> stats_on_gvt(<a class="code" href="core_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a> gvt)</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;{</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        stats_cur.<a class="code" href="structstats__thread.html#aa4988bb5aa6b80b69fbaf24212e4601b">rt</a> = <a class="code" href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a>(sim_start_ts);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;        file_write_chunk(stats_tmps[<a class="code" href="core_8c.html#a91a4943f7079610bd0bdaa6362bc0ead">rid</a>], &amp;stats_cur, <span class="keyword">sizeof</span>(stats_cur));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        memset(&amp;stats_cur, 0, <span class="keyword">sizeof</span>(stats_cur));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="core_8c.html#a91a4943f7079610bd0bdaa6362bc0ead">rid</a> != 0)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keyword">struct </span><a class="code" href="structstats__node.html">stats_node</a> stats_node_cur =</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        {.<a class="code" href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">gvt</a> = <a class="code" href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">gvt</a>, .rss = mem_stat_rss_current_get()};</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        file_write_chunk(stats_node_tmp, &amp;stats_node_cur, <span class="keyword">sizeof</span>(stats_node_cur));</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        memset(&amp;stats_node_cur, 0, <span class="keyword">sizeof</span>(stats_node_cur));</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160; </div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        printf(<span class="stringliteral">&quot;\rVirtual time: %lf&quot;</span>, <a class="code" href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">gvt</a>);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        fflush(stdout);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;}</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160; </div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="keywordtype">void</span> stats_dump(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        puts(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;        fflush(stdout);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="astats_8c_html_aeaa149d6c0445b22e944a063e0884d0d"><div class="ttname"><a href="stats_8c.html#aeaa149d6c0445b22e944a063e0884d0d">stats_init</a></div><div class="ttdeci">void stats_init(void)</div><div class="ttdoc">Initializes the stats subsystem in the current thread.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00179">stats.c:179</a></div></div>
<div class="ttc" id="acore_8h_html_a8f79ad6880e99acb4edd079069847d9d"><div class="ttname"><a href="core_8h.html#a8f79ad6880e99acb4edd079069847d9d">simtime_t</a></div><div class="ttdeci">double simtime_t</div><div class="ttdoc">The type used to represent logical time in the simulation.</div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00062">core.h:62</a></div></div>
<div class="ttc" id="acore_8h_html_abbbb4962846f86af8e54d514d1b348a9"><div class="ttname"><a href="core_8h.html#abbbb4962846f86af8e54d514d1b348a9">rid_t</a></div><div class="ttdeci">unsigned rid_t</div><div class="ttdoc">Used to identify in a node the computing resources (threads at the moment)</div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00077">core.h:77</a></div></div>
<div class="ttc" id="alog_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="log_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdoc">The logging level reserved to unexpected, problematic conditions.</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00033">log.h:33</a></div></div>
<div class="ttc" id="acore_8c_html_ae146790564e2175182e1cd7e32da3aa6"><div class="ttname"><a href="core_8c.html#ae146790564e2175182e1cd7e32da3aa6">nid</a></div><div class="ttdeci">nid_t nid</div><div class="ttdoc">The node identifier of the node.</div><div class="ttdef"><b>Definition:</b> <a href="core_8c_source.html#l00020">core.c:20</a></div></div>
<div class="ttc" id="aio_8h_html_aabff20d55fe51d94772a40aced8b19ac"><div class="ttname"><a href="io_8h.html#aabff20d55fe51d94772a40aced8b19ac">io_file_tmp_get</a></div><div class="ttdeci">FILE * io_file_tmp_get(void)</div><div class="ttdoc">Creates a temporary file.</div></div>
<div class="ttc" id="acore_8h_html_a6bbc54689d56c687d66a8e5b3374dfae"><div class="ttname"><a href="core_8h.html#a6bbc54689d56c687d66a8e5b3374dfae">nid_t</a></div><div class="ttdeci">int nid_t</div><div class="ttdoc">Used to identify MPI nodes in a distributed environment.</div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00079">core.h:79</a></div></div>
<div class="ttc" id="astructstats__glob_html_a42fde726f84b73b933cabf0bc213c42f"><div class="ttname"><a href="structstats__glob.html#a42fde726f84b73b933cabf0bc213c42f">stats_glob::glob_fini_rt</a></div><div class="ttdeci">uint64_t glob_fini_rt</div><div class="ttdoc">The latest ts before having to aggregate stats.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00066">stats.c:66</a></div></div>
<div class="ttc" id="astructstats__thread_html"><div class="ttname"><a href="structstats__thread.html">stats_thread</a></div><div class="ttdoc">A container for statistics in a logical time period.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00044">stats.c:44</a></div></div>
<div class="ttc" id="astructstats__node_html"><div class="ttname"><a href="structstats__node.html">stats_node</a></div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00051">stats.c:51</a></div></div>
<div class="ttc" id="amm_8c_html_af66ae2c31965b29586901a21fab3e012"><div class="ttname"><a href="mm_8c.html#af66ae2c31965b29586901a21fab3e012">mm_alloc</a></div><div class="ttdeci">void * mm_alloc(size_t mem_size)</div><div class="ttdoc">A version of the stdlib malloc() used internally.</div><div class="ttdef"><b>Definition:</b> <a href="mm_8h_source.html#l00026">mm.h:26</a></div></div>
<div class="ttc" id="astats_8c_html_aaba9e91afadfd2ef11d623b51487527a"><div class="ttname"><a href="stats_8c.html#aaba9e91afadfd2ef11d623b51487527a">stats_global_fini</a></div><div class="ttdeci">void stats_global_fini(void)</div><div class="ttdoc">Finalizes the stats subsystem in the node.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00273">stats.c:273</a></div></div>
<div class="ttc" id="ampi_8c_html_acb1301d97e9200c5b2e9a4dc27bc72d3"><div class="ttname"><a href="mpi_8c.html#acb1301d97e9200c5b2e9a4dc27bc72d3">mpi_node_barrier</a></div><div class="ttdeci">void mpi_node_barrier(void)</div><div class="ttdoc">A node barrier.</div><div class="ttdef"><b>Definition:</b> <a href="mpi_8c_source.html#l00365">mpi.c:365</a></div></div>
<div class="ttc" id="acore_8c_html_a36101d9260ca31d3930f69b9d2d1f64d"><div class="ttname"><a href="core_8c.html#a36101d9260ca31d3930f69b9d2d1f64d">n_threads</a></div><div class="ttdeci">rid_t n_threads</div><div class="ttdoc">The total number of MPI nodes in the simulation.</div><div class="ttdef"><b>Definition:</b> <a href="core_8c_source.html#l00015">core.c:15</a></div></div>
<div class="ttc" id="ampi_8c_html_acb3c33fc5ce4a4b4596c282082d50647"><div class="ttname"><a href="mpi_8c.html#acb3c33fc5ce4a4b4596c282082d50647">mpi_blocking_data_rcv</a></div><div class="ttdeci">void * mpi_blocking_data_rcv(int *data_size_p, nid_t src)</div><div class="ttdoc">Receives a byte buffer from another node.</div><div class="ttdef"><b>Definition:</b> <a href="mpi_8c_source.html#l00397">mpi.c:397</a></div></div>
<div class="ttc" id="astats_8c_html_a3f10dd99af0532c7131b5d135160e9f8"><div class="ttname"><a href="stats_8c.html#a3f10dd99af0532c7131b5d135160e9f8">stats_global_time_start</a></div><div class="ttdeci">void stats_global_time_start(void)</div><div class="ttdoc">Initializes the internal timer used to take accurate measurements.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00146">stats.c:146</a></div></div>
<div class="ttc" id="atimer_8h_html_aaf3e6a4d4c95119af7e1a3e1c34a2833"><div class="ttname"><a href="timer_8h.html#aaf3e6a4d4c95119af7e1a3e1c34a2833">timer_uint</a></div><div class="ttdeci">uint_fast64_t timer_uint</div><div class="ttdef"><b>Definition:</b> <a href="timer_8h_source.html#l00020">timer.h:20</a></div></div>
<div class="ttc" id="astructstats__measure_html_a16ecc25c5b67c81fdbaf389ff7cb2347"><div class="ttname"><a href="structstats__measure.html#a16ecc25c5b67c81fdbaf389ff7cb2347">stats_measure::count</a></div><div class="ttdeci">uint64_t count</div><div class="ttdoc">The count of events of this type.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00036">stats.c:36</a></div></div>
<div class="ttc" id="astats_8h_html"><div class="ttname"><a href="stats_8h.html">stats.h</a></div><div class="ttdoc">Statistics module.</div></div>
<div class="ttc" id="alog_8h_html_a9040717cd3977ade4c2a18eb5418c312"><div class="ttname"><a href="log_8h.html#a9040717cd3977ade4c2a18eb5418c312">log_log</a></div><div class="ttdeci">#define log_log(lvl,...)</div><div class="ttdoc">Produces a log.</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00049">log.h:49</a></div></div>
<div class="ttc" id="atimer_8h_html"><div class="ttname"><a href="timer_8h.html">timer.h</a></div><div class="ttdoc">Timers.</div></div>
<div class="ttc" id="astructstats__glob_html_a750a2471dc8141051b50fe18b7db121a"><div class="ttname"><a href="structstats__glob.html#a750a2471dc8141051b50fe18b7db121a">stats_glob::threads_count</a></div><div class="ttdeci">uint64_t threads_count</div><div class="ttdoc">The number of threads in this node.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00060">stats.c:60</a></div></div>
<div class="ttc" id="astructstats__glob_html"><div class="ttname"><a href="structstats__glob.html">stats_glob</a></div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00058">stats.c:58</a></div></div>
<div class="ttc" id="acore_8c_html_a91a4943f7079610bd0bdaa6362bc0ead"><div class="ttname"><a href="core_8c.html#a91a4943f7079610bd0bdaa6362bc0ead">rid</a></div><div class="ttdeci">__thread rid_t rid</div><div class="ttdoc">The identifier of the thread.</div><div class="ttdef"><b>Definition:</b> <a href="core_8c_source.html#l00016">core.c:16</a></div></div>
<div class="ttc" id="amm_8c_html_a55545df4b4307c86f0f95c42f1d68b07"><div class="ttname"><a href="mm_8c.html#a55545df4b4307c86f0f95c42f1d68b07">mm_free</a></div><div class="ttdeci">void mm_free(void *ptr)</div><div class="ttdoc">A version of the stdlib free() used internally.</div><div class="ttdef"><b>Definition:</b> <a href="mm_8h_source.html#l00061">mm.h:61</a></div></div>
<div class="ttc" id="astructstats__measure_html_af231201acf8a6d822229dea7da4dcd27"><div class="ttname"><a href="structstats__measure.html#af231201acf8a6d822229dea7da4dcd27">stats_measure::var_t</a></div><div class="ttdeci">uint64_t var_t</div><div class="ttdoc">The variance of the time to complete multiplied by the events count.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00040">stats.c:40</a></div></div>
<div class="ttc" id="acore_8h_html_ac082df2dd9a1024f6e8d16a61855d989"><div class="ttname"><a href="core_8h.html#ac082df2dd9a1024f6e8d16a61855d989">likely</a></div><div class="ttdeci">#define likely(exp)</div><div class="ttdoc">Optimize the branch as likely taken.</div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00057">core.h:57</a></div></div>
<div class="ttc" id="astats_8c_html_a6ba56d5c3bc4d8cc7bb98cbeca24c559"><div class="ttname"><a href="stats_8c.html#a6ba56d5c3bc4d8cc7bb98cbeca24c559">s_names</a></div><div class="ttdeci">const char *const s_names[]</div><div class="ttdoc">The statistics names, used to fill in the header of the final csv.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00078">stats.c:78</a></div></div>
<div class="ttc" id="alog_8h_html_aea3f57d6dcc5b4ac957e2679e87dde27"><div class="ttname"><a href="log_8h.html#aea3f57d6dcc5b4ac957e2679e87dde27">LOG_WARN</a></div><div class="ttdeci">#define LOG_WARN</div><div class="ttdoc">The logging level reserved to unexpected, non deal breaking conditions.</div><div class="ttdef"><b>Definition:</b> <a href="log_8h_source.html#l00031">log.h:31</a></div></div>
<div class="ttc" id="astructstats__glob_html_aca05a63245a0c65eb537d04142d54eb9"><div class="ttname"><a href="structstats__glob.html#aca05a63245a0c65eb537d04142d54eb9">stats_glob::glob_init_rt</a></div><div class="ttdeci">uint64_t glob_init_rt</div><div class="ttdoc">When stats global init has been called.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00064">stats.c:64</a></div></div>
<div class="ttc" id="aio_8h_html"><div class="ttname"><a href="io_8h.html">io.h</a></div><div class="ttdoc">Generic input-output facilities.</div></div>
<div class="ttc" id="aarg__parse_8h_html"><div class="ttname"><a href="arg__parse_8h.html">arg_parse.h</a></div><div class="ttdoc">Command line option parser.</div></div>
<div class="ttc" id="astructstats__node_html_af76abe0b371c73bb0ac288133734a32a"><div class="ttname"><a href="structstats__node.html#af76abe0b371c73bb0ac288133734a32a">stats_node::rss</a></div><div class="ttdeci">uint64_t rss</div><div class="ttdoc">The size in bytes of the resident set.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00055">stats.c:55</a></div></div>
<div class="ttc" id="acore_8h_html"><div class="ttname"><a href="core_8h.html">core.h</a></div><div class="ttdoc">Core ROOT-Sim functionalities.</div></div>
<div class="ttc" id="acore_8h_html_a1c0c89beb84d05c5ba0bc7ce527a3925"><div class="ttname"><a href="core_8h.html#a1c0c89beb84d05c5ba0bc7ce527a3925">unlikely</a></div><div class="ttdeci">#define unlikely(exp)</div><div class="ttdoc">Optimize the branch as likely not taken.</div><div class="ttdef"><b>Definition:</b> <a href="core_8h_source.html#l00059">core.h:59</a></div></div>
<div class="ttc" id="astructstats__node_html_acc07ece763aec4a22f646cfbd1dd98e6"><div class="ttname"><a href="structstats__node.html#acc07ece763aec4a22f646cfbd1dd98e6">stats_node::gvt</a></div><div class="ttdeci">simtime_t gvt</div><div class="ttdoc">The gvt value.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00053">stats.c:53</a></div></div>
<div class="ttc" id="astats_8c_html_a7239d7313f2bc17c3e8cbecbbd332675"><div class="ttname"><a href="stats_8c.html#a7239d7313f2bc17c3e8cbecbbd332675">stats_global_init</a></div><div class="ttdeci">void stats_global_init(void)</div><div class="ttdoc">Initializes the stats subsystem in the node.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00162">stats.c:162</a></div></div>
<div class="ttc" id="atimer_8c_html_ad060dfb47647f24aac724e2be875e92a"><div class="ttname"><a href="timer_8c.html#ad060dfb47647f24aac724e2be875e92a">timer_value</a></div><div class="ttdeci">timer_uint timer_value(timer_uint start)</div><div class="ttdoc">Computes a time interval measure using a previous timer_uint value.</div></div>
<div class="ttc" id="ampi_8c_html_ac8efb86deaac9d9d8a08bc0dd1689885"><div class="ttname"><a href="mpi_8c.html#ac8efb86deaac9d9d8a08bc0dd1689885">mpi_blocking_data_send</a></div><div class="ttdeci">void mpi_blocking_data_send(const void *data, int data_size, nid_t dest)</div><div class="ttdoc">Sends a byte buffer to another node.</div><div class="ttdef"><b>Definition:</b> <a href="mpi_8c_source.html#l00381">mpi.c:381</a></div></div>
<div class="ttc" id="amem_8h_html"><div class="ttname"><a href="mem_8h.html">mem.h</a></div><div class="ttdoc">Platform specific memory utilities.</div></div>
<div class="ttc" id="astructstats__measure_html_a827f1b8d1b9eb514afe1b747698b67b9"><div class="ttname"><a href="structstats__measure.html#a827f1b8d1b9eb514afe1b747698b67b9">stats_measure::sum_t</a></div><div class="ttdeci">uint64_t sum_t</div><div class="ttdoc">The mean time to complete an event multiplied by the events count.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00038">stats.c:38</a></div></div>
<div class="ttc" id="astructstats__thread_html_ab3482596682dc55b1df711866b9867e2"><div class="ttname"><a href="structstats__thread.html#ab3482596682dc55b1df711866b9867e2">stats_thread::s</a></div><div class="ttdeci">struct stats_measure s[STATS_COUNT]</div><div class="ttdoc">The array of statistics taken in the period.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00048">stats.c:48</a></div></div>
<div class="ttc" id="astats_8c_html_a90e9709ceb1778ab3f4ca70feb26bec8"><div class="ttname"><a href="stats_8c.html#a90e9709ceb1778ab3f4ca70feb26bec8">stats_global_time_take</a></div><div class="ttdeci">void stats_global_time_take(enum stats_global_time this_stat)</div><div class="ttdoc">Initializes the internal timer used to take accurate measurements.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00154">stats.c:154</a></div></div>
<div class="ttc" id="aarg__parse_8c_html_a7195c1ec94920593811357698b8efe41"><div class="ttname"><a href="arg__parse_8c.html#a7195c1ec94920593811357698b8efe41">arg_parse_program_name</a></div><div class="ttdeci">const char * arg_parse_program_name(void)</div><div class="ttdoc">Gets the program name.</div><div class="ttdef"><b>Definition:</b> <a href="arg__parse_8c_source.html#l00422">arg_parse.c:422</a></div></div>
<div class="ttc" id="astructstats__thread_html_aa4988bb5aa6b80b69fbaf24212e4601b"><div class="ttname"><a href="structstats__thread.html#aa4988bb5aa6b80b69fbaf24212e4601b">stats_thread::rt</a></div><div class="ttdeci">uint64_t rt</div><div class="ttdoc">Real elapsed time in microseconds from simulation beginning.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00046">stats.c:46</a></div></div>
<div class="ttc" id="astructstats__glob_html_a30292ab96ddc2463d07ea8af5f44b12b"><div class="ttname"><a href="structstats__glob.html#a30292ab96ddc2463d07ea8af5f44b12b">stats_glob::max_rss</a></div><div class="ttdeci">uint64_t max_rss</div><div class="ttdoc">The maximum size in bytes of the resident set.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00062">stats.c:62</a></div></div>
<div class="ttc" id="atimer_8c_html_a2df778f2559a4dd4d7a44fbe5551dbee"><div class="ttname"><a href="timer_8c.html#a2df778f2559a4dd4d7a44fbe5551dbee">timer_new</a></div><div class="ttdeci">timer_uint timer_new(void)</div><div class="ttdoc">Gets a new starting point for an time interval measure.</div></div>
<div class="ttc" id="astructstats__glob_html_a8a8633c3e5e4ecb254ea7c9019cdaafe"><div class="ttname"><a href="structstats__glob.html#a8a8633c3e5e4ecb254ea7c9019cdaafe">stats_glob::timestamps</a></div><div class="ttdeci">uint64_t timestamps[STATS_GLOBAL_COUNT]</div><div class="ttdoc">The timestamps of the relevant simulation life-cycle events.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00068">stats.c:68</a></div></div>
<div class="ttc" id="astructstats__measure_html"><div class="ttname"><a href="structstats__measure.html">stats_measure</a></div><div class="ttdoc">A set of statistical values of a single metric.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00034">stats.c:34</a></div></div>
<div class="ttc" id="astats_8c_html_a67e625728da937e5dced9ff57d5658ad"><div class="ttname"><a href="stats_8c.html#a67e625728da937e5dced9ff57d5658ad">file_open</a></div><div class="ttdeci">static FILE * file_open(const char *open_type, const char *fmt,...)</div><div class="ttdoc">A version of fopen() which accepts a printf style format string.</div><div class="ttdef"><b>Definition:</b> <a href="stats_8c_source.html#l00121">stats.c:121</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_2241064965c8d9ca993f08b926076f7d.html">log</a></li><li class="navelem"><a class="el" href="stats_8c.html">stats.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
